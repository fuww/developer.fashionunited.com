{
  "events": [
    {
      "event": "call",
      "http_server_request": {
        "path_info": "/node_modules/.pnpm/astro@4.12.2_@types+node@20.14.11_typescript@5.5.3/node_modules/astro/dist/prefetch/index.js",
        "request_method": "GET",
        "headers": {
          "Host": "localhost:4321",
          "Connection": "keep-alive",
          "Sec-Ch-Ua": "\"Not/A)Brand\";v=\"8\", \"Chromium\";v=\"126\", \"Google Chrome\";v=\"126\"",
          "Origin": "http://localhost:4321",
          "Dnt": "1",
          "Sec-Ch-Ua-Mobile": "?0",
          "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36",
          "Sec-Ch-Ua-Platform": "\"macOS\"",
          "Accept": "*/*",
          "Sec-Fetch-Site": "same-origin",
          "Sec-Fetch-Mode": "cors",
          "Sec-Fetch-Dest": "script",
          "Referer": "http://localhost:4321/node_modules/.pnpm/astro@4.12.2_@types+node@20.14.11_typescript@5.5.3/node_modules/astro/dist/virtual-modules/prefetch.js?v=6fff9a3d",
          "Accept-Encoding": "gzip, deflate, br, zstd",
          "Accept-Language": "nl,en;q=0.9,en-US;q=0.8,en-GB;q=0.7",
          "Sec-Gpc": "1"
        },
        "protocol": "HTTP/1.1"
      },
      "id": 1,
      "thread_id": 0,
      "message": [
        {
          "name": "v",
          "value": "'6fff9a3d'",
          "class": "String"
        }
      ]
    },
    {
      "event": "return",
      "http_server_response": {
        "status_code": 200,
        "headers": {
          "Access-Control-Allow-Origin": "*",
          "Content-Type": "text/javascript",
          "Cache-Control": "max-age=31536000,immutable",
          "Etag": "W/\"1836-Q81VqmPxc8lkgofbU772+howX68\""
        },
        "return_value": {
          "class": "[ResponseBody]",
          "value": "import.meta.env = {\"BASE_URL\": \"/\", \"MODE\": \"development\", \"DEV\": true, \"PROD\": false, \"SSR\": false, \"SITE\": \"https://developer.fashionunited.com\", \"ASSETS_PREFIX\": undefined};const debug = import.meta.env.DEV ? console.debug : void 0;\nconst inBrowser = import.meta.env.SSR === false;\nconst prefetchedUrls = /* @__PURE__ */ new Set();\nconst listenedAnchors = /* @__PURE__ */ new WeakSet();\nlet prefetchAll = true;\nlet defaultStrategy = undefined;\nlet clientPrerender = false;\nlet inited = false;\nfunction init(defaultOpts) {\n  if (!inBrowser) return;\n  if (inited) return;\n  inited = true;\n  debug?.(`[astro] Initializing prefetch script`);\n  prefetchAll ??= defaultOpts?.prefetchAll ?? false;\n  defaultStrategy ??= defaultOpts?.defaultStrategy ?? \"hover\";\n  initTapStrategy();\n  initHoverStrategy();\n  initViewportStrategy();\n  initLoadStrategy();\n}\nfunction initTapStrategy() {\n  for (const event of [\"touchstart\", \"mousedown\"]) {\n    document.body.addEventListener(\n      event,\n      (e) => {\n        if (elMatchesStrategy(e.target, \"tap\")) {\n          prefetch(e.target.href, { ignoreSlowConnection: true });\n        }\n      },\n      { passive: true }\n    );\n  }\n}\nfunction initHoverStrategy() {\n  let timeout;\n  document.body.addEventListener(\n    \"focusin\",\n    (e) => {\n      if (elMatchesStrategy(e.target, \"hover\")) {\n        handleHoverIn(e);\n      }\n    },\n    { passive: true }\n  );\n  document.body.addEventListener(\"focusout\", handleHoverOut, { passive: true });\n  onPageLoad(() => {\n    for (const anchor of document.getElementsByTagName(\"a\")) {\n      if (listenedAnchors.has(anchor)) continue;\n      if (elMatchesStrategy(anchor, \"hover\")) {\n        listenedAnchors.add(anchor);\n        anchor.addEventListener(\"mouseenter\", handleHoverIn, { passive: true });\n        anchor.addEventListener(\"mouseleave\", handleHoverOut, { passive: true });\n      }\n    }\n  });\n  function handleHoverIn(e) {\n    const href = e.target.href;\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => {\n      prefetch(href);\n    }, 80);\n  }\n  function handleHoverOut() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = 0;\n    }\n  }\n}\nfunction initViewportStrategy() {\n  let observer;\n  onPageLoad(() => {\n    for (const anchor of document.getElementsByTagName(\"a\")) {\n      if (listenedAnchors.has(anchor)) continue;\n      if (elMatchesStrategy(anchor, \"viewport\")) {\n        listenedAnchors.add(anchor);\n        observer ??= createViewportIntersectionObserver();\n        observer.observe(anchor);\n      }\n    }\n  });\n}\nfunction createViewportIntersectionObserver() {\n  const timeouts = /* @__PURE__ */ new WeakMap();\n  return new IntersectionObserver((entries, observer) => {\n    for (const entry of entries) {\n      const anchor = entry.target;\n      const timeout = timeouts.get(anchor);\n      if (entry.isIntersecting) {\n        if (timeout) {\n          clearTimeout(timeout);\n        }\n        timeouts.set(\n          anchor,\n          setTimeout(() => {\n            observer.unobserve(anchor);\n            timeouts.delete(anchor);\n            prefetch(anchor.href);\n          }, 300)\n        );\n      } else {\n        if (timeout) {\n          clearTimeout(timeout);\n          timeouts.delete(anchor);\n        }\n      }\n    }\n  });\n}\nfunction initLoadStrategy() {\n  onPageLoad(() => {\n    for (const anchor of document.getElementsByTagName(\"a\")) {\n      if (elMatchesStrategy(anchor, \"load\")) {\n        prefetch(anchor.href);\n      }\n    }\n  });\n}\nfunction prefetch(url, opts) {\n  const ignoreSlowConnection = opts?.ignoreSlowConnection ?? false;\n  if (!canPrefetchUrl(url, ignoreSlowConnection)) return;\n  prefetchedUrls.add(url);\n  if (clientPrerender && HTMLScriptElement.supports?.(\"speculationrules\")) {\n    debug?.(`[astro] Prefetching ${url} with <script type=\"speculationrules\">`);\n    appendSpeculationRules(url);\n  } else if (document.createElement(\"link\").relList?.supports?.(\"prefetch\") && opts?.with !== \"fetch\") {\n    debug?.(`[astro] Prefetching ${url} with <link rel=\"prefetch\">`);\n    const link = document.createElement(\"link\");\n    link.rel = \"prefetch\";\n    link.setAttribute(\"href\", url);\n    document.head.append(link);\n  } else {\n    debug?.(`[astro] Prefetching ${url} with fetch`);\n    fetch(url, { priority: \"low\" });\n  }\n}\nfunction canPrefetchUrl(url, ignoreSlowConnection) {\n  if (!navigator.onLine) return false;\n  if (!ignoreSlowConnection && isSlowConnection()) return false;\n  try {\n    const urlObj = new URL(url, location.href);\n    return location.origin === urlObj.origin && (location.pathname !== urlObj.pathname || location.search !== urlObj.search) && !prefetchedUrls.has(url);\n  } catch {\n  }\n  return false;\n}\nfunction elMatchesStrategy(el, strategy) {\n  if (el?.tagName !== \"A\") return false;\n  const attrValue = el.dataset.astroPrefetch;\n  if (attrValue === \"false\") {\n    return false;\n  }\n  if (strategy === \"tap\" && (attrValue != null || prefetchAll) && isSlowConnection()) {\n    return true;\n  }\n  if (attrValue == null && prefetchAll || attrValue === \"\") {\n    return strategy === defaultStrategy;\n  }\n  if (attrValue === strategy) {\n    return true;\n  }\n  return false;\n}\nfunction isSlowConnection() {\n  if (\"connection\" in navigator) {\n    const conn = navigator.connection;\n    return conn.saveData || /2g/.test(conn.effectiveType);\n  }\n  return false;\n}\nfunction onPageLoad(cb) {\n  cb();\n  let firstLoad = false;\n  document.addEventListener(\"astro:page-load\", () => {\n    if (!firstLoad) {\n      firstLoad = true;\n      return;\n    }\n    cb();\n  });\n}\nfunction appendSpeculationRules(url) {\n  const script = document.createElement(\"script\");\n  script.type = \"speculationrules\";\n  script.textContent = JSON.stringify({\n    prerender: [\n      {\n        source: \"list\",\n        urls: [url]\n      }\n    ],\n    // Currently, adding `prefetch` is required to fallback if `prerender` fails.\n    // Possibly will be automatic in the future, in which case it can be removed.\n    // https://github.com/WICG/nav-speculation/issues/162#issuecomment-1977818473\n    prefetch: [\n      {\n        source: \"list\",\n        urls: [url]\n      }\n    ]\n  });\n  document.head.append(script);\n}\nexport {\n  init,\n  prefetch\n};\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzP3Y9NmZmZjlhM2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0Lm1ldGEuZW52ID0ge1wiQkFTRV9VUkxcIjogXCIvXCIsIFwiTU9ERVwiOiBcImRldmVsb3BtZW50XCIsIFwiREVWXCI6IHRydWUsIFwiUFJPRFwiOiBmYWxzZSwgXCJTU1JcIjogZmFsc2UsIFwiU0lURVwiOiBcImh0dHBzOi8vZGV2ZWxvcGVyLmZhc2hpb251bml0ZWQuY29tXCIsIFwiQVNTRVRTX1BSRUZJWFwiOiB1bmRlZmluZWR9O2NvbnN0IGRlYnVnID0gaW1wb3J0Lm1ldGEuZW52LkRFViA/IGNvbnNvbGUuZGVidWcgOiB2b2lkIDA7XG5jb25zdCBpbkJyb3dzZXIgPSBpbXBvcnQubWV0YS5lbnYuU1NSID09PSBmYWxzZTtcbmNvbnN0IHByZWZldGNoZWRVcmxzID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbmNvbnN0IGxpc3RlbmVkQW5jaG9ycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgV2Vha1NldCgpO1xubGV0IHByZWZldGNoQWxsID0gdHJ1ZTtcbmxldCBkZWZhdWx0U3RyYXRlZ3kgPSB1bmRlZmluZWQ7XG5sZXQgY2xpZW50UHJlcmVuZGVyID0gZmFsc2U7XG5sZXQgaW5pdGVkID0gZmFsc2U7XG5mdW5jdGlvbiBpbml0KGRlZmF1bHRPcHRzKSB7XG4gIGlmICghaW5Ccm93c2VyKSByZXR1cm47XG4gIGlmIChpbml0ZWQpIHJldHVybjtcbiAgaW5pdGVkID0gdHJ1ZTtcbiAgZGVidWc/LihgW2FzdHJvXSBJbml0aWFsaXppbmcgcHJlZmV0Y2ggc2NyaXB0YCk7XG4gIHByZWZldGNoQWxsID8/PSBkZWZhdWx0T3B0cz8ucHJlZmV0Y2hBbGwgPz8gZmFsc2U7XG4gIGRlZmF1bHRTdHJhdGVneSA/Pz0gZGVmYXVsdE9wdHM/LmRlZmF1bHRTdHJhdGVneSA/PyBcImhvdmVyXCI7XG4gIGluaXRUYXBTdHJhdGVneSgpO1xuICBpbml0SG92ZXJTdHJhdGVneSgpO1xuICBpbml0Vmlld3BvcnRTdHJhdGVneSgpO1xuICBpbml0TG9hZFN0cmF0ZWd5KCk7XG59XG5mdW5jdGlvbiBpbml0VGFwU3RyYXRlZ3koKSB7XG4gIGZvciAoY29uc3QgZXZlbnQgb2YgW1widG91Y2hzdGFydFwiLCBcIm1vdXNlZG93blwiXSkge1xuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgIGV2ZW50LFxuICAgICAgKGUpID0+IHtcbiAgICAgICAgaWYgKGVsTWF0Y2hlc1N0cmF0ZWd5KGUudGFyZ2V0LCBcInRhcFwiKSkge1xuICAgICAgICAgIHByZWZldGNoKGUudGFyZ2V0LmhyZWYsIHsgaWdub3JlU2xvd0Nvbm5lY3Rpb246IHRydWUgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7IHBhc3NpdmU6IHRydWUgfVxuICAgICk7XG4gIH1cbn1cbmZ1bmN0aW9uIGluaXRIb3ZlclN0cmF0ZWd5KCkge1xuICBsZXQgdGltZW91dDtcbiAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFxuICAgIFwiZm9jdXNpblwiLFxuICAgIChlKSA9PiB7XG4gICAgICBpZiAoZWxNYXRjaGVzU3RyYXRlZ3koZS50YXJnZXQsIFwiaG92ZXJcIikpIHtcbiAgICAgICAgaGFuZGxlSG92ZXJJbihlKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHsgcGFzc2l2ZTogdHJ1ZSB9XG4gICk7XG4gIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3Vzb3V0XCIsIGhhbmRsZUhvdmVyT3V0LCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gIG9uUGFnZUxvYWQoKCkgPT4ge1xuICAgIGZvciAoY29uc3QgYW5jaG9yIG9mIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYVwiKSkge1xuICAgICAgaWYgKGxpc3RlbmVkQW5jaG9ycy5oYXMoYW5jaG9yKSkgY29udGludWU7XG4gICAgICBpZiAoZWxNYXRjaGVzU3RyYXRlZ3koYW5jaG9yLCBcImhvdmVyXCIpKSB7XG4gICAgICAgIGxpc3RlbmVkQW5jaG9ycy5hZGQoYW5jaG9yKTtcbiAgICAgICAgYW5jaG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsIGhhbmRsZUhvdmVySW4sIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcbiAgICAgICAgYW5jaG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsIGhhbmRsZUhvdmVyT3V0LCB7IHBhc3NpdmU6IHRydWUgfSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgZnVuY3Rpb24gaGFuZGxlSG92ZXJJbihlKSB7XG4gICAgY29uc3QgaHJlZiA9IGUudGFyZ2V0LmhyZWY7XG4gICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICB9XG4gICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgcHJlZmV0Y2goaHJlZik7XG4gICAgfSwgODApO1xuICB9XG4gIGZ1bmN0aW9uIGhhbmRsZUhvdmVyT3V0KCkge1xuICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICB0aW1lb3V0ID0gMDtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIGluaXRWaWV3cG9ydFN0cmF0ZWd5KCkge1xuICBsZXQgb2JzZXJ2ZXI7XG4gIG9uUGFnZUxvYWQoKCkgPT4ge1xuICAgIGZvciAoY29uc3QgYW5jaG9yIG9mIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiYVwiKSkge1xuICAgICAgaWYgKGxpc3RlbmVkQW5jaG9ycy5oYXMoYW5jaG9yKSkgY29udGludWU7XG4gICAgICBpZiAoZWxNYXRjaGVzU3RyYXRlZ3koYW5jaG9yLCBcInZpZXdwb3J0XCIpKSB7XG4gICAgICAgIGxpc3RlbmVkQW5jaG9ycy5hZGQoYW5jaG9yKTtcbiAgICAgICAgb2JzZXJ2ZXIgPz89IGNyZWF0ZVZpZXdwb3J0SW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKTtcbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShhbmNob3IpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVWaWV3cG9ydEludGVyc2VjdGlvbk9ic2VydmVyKCkge1xuICBjb25zdCB... (24541 more characters)"
        }
      },
      "id": 2,
      "thread_id": 0,
      "parent_id": 1,
      "elapsed": 0.0008435830000053102
    }
  ],
  "version": "1.12",
  "metadata": {
    "client": {
      "name": "appmap-node",
      "version": "2.23.0",
      "url": "https://github.com/getappmap/appmap-node"
    },
    "language": {
      "name": "javascript",
      "engine": "Node.js",
      "version": "v20.11.1"
    },
    "app": "developer-fashionunited-com",
    "recorder": {
      "type": "requests",
      "name": "requests"
    },
    "name": "GET /node_modules/.pnpm/astro@4.12.2_@types+node@20.14.11_typescript@5.5.3/node_modules/astro/dist/prefetch/index.js (200) — 2024-07-22T11:35:45.520Z"
  },
  "classMap": [
    {
      "type": "http",
      "name": "HTTP server requests",
      "children": [
        {
          "type": "route",
          "name": "GET /node_modules/.pnpm/astro@4.12.2_@types+node@20.14.11_typescript@5.5.3/node_modules/astro/dist/prefetch/index.js"
        }
      ]
    }
  ]
}