{
  "events": [
    {
      "event": "call",
      "http_server_request": {
        "path_info": "/node_modules/.pnpm/astro@4.12.2_@types+node@20.14.11_typescript@5.5.3/node_modules/astro/dist/runtime/client/dev-toolbar/apps/audit/ui/audit-ui.js",
        "request_method": "GET",
        "headers": {
          "Host": "localhost:4321",
          "Connection": "keep-alive",
          "Sec-Ch-Ua": "\"Not/A)Brand\";v=\"8\", \"Chromium\";v=\"126\", \"Google Chrome\";v=\"126\"",
          "Origin": "http://localhost:4321",
          "Dnt": "1",
          "Sec-Ch-Ua-Mobile": "?0",
          "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36",
          "Sec-Ch-Ua-Platform": "\"macOS\"",
          "Accept": "*/*",
          "Sec-Fetch-Site": "same-origin",
          "Sec-Fetch-Mode": "cors",
          "Sec-Fetch-Dest": "script",
          "Referer": "http://localhost:4321/node_modules/.pnpm/astro@4.12.2_@types+node@20.14.11_typescript@5.5.3/node_modules/astro/dist/runtime/client/dev-toolbar/apps/audit/index.js?v=6fff9a3d",
          "Accept-Encoding": "gzip, deflate, br, zstd",
          "Accept-Language": "nl,en;q=0.9,en-US;q=0.8,en-GB;q=0.7",
          "Sec-Gpc": "1"
        },
        "protocol": "HTTP/1.1"
      },
      "id": 1,
      "thread_id": 0,
      "message": [
        {
          "name": "v",
          "value": "'6fff9a3d'",
          "class": "String"
        }
      ]
    },
    {
      "event": "return",
      "http_server_response": {
        "status_code": 200,
        "headers": {
          "Access-Control-Allow-Origin": "*",
          "Content-Type": "text/javascript",
          "Cache-Control": "max-age=31536000,immutable",
          "Etag": "W/\"167f-Q14ZS+u+n602URojkpjUsV99nUc\""
        },
        "return_value": {
          "class": "[ResponseBody]",
          "value": "import { escape as escapeHTML } from \"/node_modules/.pnpm/html-escaper@3.0.3/node_modules/html-escaper/esm/index.js?v=6fff9a3d\";\nimport {\n  attachTooltipToHighlight,\n  createHighlight,\n  getElementsPositionInDocument\n} from \"/node_modules/.pnpm/astro@4.12.2_@types+node@20.14.11_typescript@5.5.3/node_modules/astro/dist/runtime/client/dev-toolbar/apps/utils/highlight.js?v=6fff9a3d\";\nimport { resolveAuditRule } from \"/node_modules/.pnpm/astro@4.12.2_@types+node@20.14.11_typescript@5.5.3/node_modules/astro/dist/runtime/client/dev-toolbar/apps/audit/rules/index.js?v=6fff9a3d\";\nfunction truncate(val, maxLength) {\n  return val.length > maxLength ? val.slice(0, maxLength - 1) + \"&hellip;\" : val;\n}\nfunction createAuditUI(audit, audits) {\n  const rect = audit.auditedElement.getBoundingClientRect();\n  const highlight = createHighlight(rect, \"warning\", { \"data-audit-code\": audit.rule.code });\n  const resolvedAuditRule = resolveAuditRule(audit.rule, audit.auditedElement);\n  const tooltip = buildAuditTooltip(resolvedAuditRule, audit.auditedElement);\n  const card = buildAuditCard(resolvedAuditRule, highlight, audit.auditedElement, audits);\n  [\"focus\", \"mouseover\"].forEach((event) => {\n    const attribute = event === \"focus\" ? \"active\" : \"hovered\";\n    highlight.addEventListener(event, () => {\n      if (event === \"focus\") {\n        audits.forEach((adt) => {\n          if (adt.card) adt.card.toggleAttribute(\"active\", false);\n        });\n        if (!card.isManualFocus) card.scrollIntoView();\n        card.toggleAttribute(\"active\", true);\n      } else {\n        card.toggleAttribute(attribute, true);\n      }\n    });\n  });\n  highlight.addEventListener(\"mouseout\", () => {\n    card.toggleAttribute(\"hovered\", false);\n  });\n  const { isFixed } = getElementsPositionInDocument(audit.auditedElement);\n  if (isFixed) {\n    tooltip.style.position = highlight.style.position = \"fixed\";\n  }\n  attachTooltipToHighlight(highlight, tooltip, audit.auditedElement);\n  return { highlight, card };\n}\nfunction buildAuditTooltip(rule, element) {\n  const tooltip = document.createElement(\"astro-dev-toolbar-tooltip\");\n  const { title, message } = rule;\n  tooltip.sections = [\n    {\n      icon: \"warning\",\n      title: escapeHTML(title)\n    },\n    {\n      content: escapeHTML(message)\n    }\n  ];\n  const elementFile = element.getAttribute(\"data-astro-source-file\");\n  const elementPosition = element.getAttribute(\"data-astro-source-loc\");\n  if (elementFile) {\n    const elementFileWithPosition = elementFile + (elementPosition ? \":\" + elementPosition : \"\");\n    tooltip.sections.push({\n      content: elementFileWithPosition.slice(\n        window.__astro_dev_toolbar__.root.length - 1\n        // We want to keep the final slash, so minus one.\n      ),\n      clickDescription: \"Click to go to file\",\n      async clickAction() {\n        await fetch(\"/__open-in-editor?file=\" + encodeURIComponent(elementFileWithPosition));\n      }\n    });\n  }\n  return tooltip;\n}\nfunction buildAuditCard(rule, highlightElement, auditedElement, audits) {\n  const card = document.createElement(\n    \"astro-dev-toolbar-audit-list-item\"\n  );\n  card.clickAction = () => {\n    if (card.hasAttribute(\"active\")) return;\n    audits.forEach((audit) => {\n      audit.card?.toggleAttribute(\"active\", false);\n    });\n    highlightElement.scrollIntoView();\n    card.isManualFocus = true;\n    highlightElement.focus();\n    card.isManualFocus = false;\n  };\n  const selectorTitleContainer = document.createElement(\"section\");\n  selectorTitleContainer.classList.add(\"selector-title-container\");\n  const selector = document.createElement(\"span\");\n  const selectorName = truncate(auditedElement.tagName.toLowerCase(), 8);\n  selector.classList.add(\"audit-selector\");\n  selector.innerHTML = escapeHTML(selectorName);\n  const title = document.createElement(\"h3\");\n  title.classList.add(\"audit-title\");\n  title.innerText = rule.title;\n  selectorTitleContainer.append(selector, title);\n  card.append(selectorTitleContainer);\n  const extendedInfo = document.createElement(\"div\");\n  extendedInfo.classList.add(\"extended-info\");\n  const selectorButton = document.createElement(\"button\");\n  selectorButton.className = \"audit-selector reset-button\";\n  selectorButton.innerHTML = `${selectorName} <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" fill=\"currentColor\" viewBox=\"0 0 256 256\"><path d=\"M128,136v64a8,8,0,0,1-16,0V155.32L45.66,221.66a8,8,0,0,1-11.32-11.32L100.68,144H56a8,8,0,0,1,0-16h64A8,8,0,0,1,128,136ZM208,32H80A16,16,0,0,0,64,48V96a8,8,0,0,0,16,0V48H208V176H160a8,8,0,0,0,0,16h48a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Z\"></path></svg>`;\n  selectorButton.addEventListener(\"click\", () => {\n    highlightElement.scrollIntoView();\n    highlightElement.focus();\n  });\n  extendedInfo.append(title.cloneNode(true));\n  extendedInfo.append(selectorButton);\n  extendedInfo.append(document.createElement(\"hr\"));\n  const message = document.createElement(\"p\");\n  message.classList.add(\"audit-message\");\n  message.innerHTML = simpleRenderMarkdown(rule.message);\n  extendedInfo.appendChild(message);\n  const description = rule.description;\n  if (description) {\n    const descriptionElement = document.createElement(\"p\");\n    descriptionElement.classList.add(\"audit-description\");\n    descriptionElement.innerHTML = simpleRenderMarkdown(description);\n    extendedInfo.appendChild(descriptionElement);\n  }\n  card.shadowRoot.appendChild(extendedInfo);\n  return card;\n}\nconst linkRegex = /\\[([^[]+)\\]\\((.*)\\)/g;\nconst boldRegex = /\\*\\*(.+)\\*\\*/g;\nconst codeRegex = /`([^`]+)`/g;\nfunction simpleRenderMarkdown(markdown) {\n  return escapeHTML(markdown).replace(linkRegex, `<a href=\"$2\" target=\"_blank\">$1</a>`).replace(boldRegex, \"<b>$1</b>\").replace(codeRegex, \"<code>$1</code>\");\n}\nexport {\n  createAuditUI\n};\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1ZGl0LXVpLmpzP3Y9NmZmZjlhM2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXNjYXBlIGFzIGVzY2FwZUhUTUwgfSBmcm9tIFwiL25vZGVfbW9kdWxlcy8ucG5wbS9odG1sLWVzY2FwZXJAMy4wLjMvbm9kZV9tb2R1bGVzL2h0bWwtZXNjYXBlci9lc20vaW5kZXguanM/dj02ZmZmOWEzZFwiO1xuaW1wb3J0IHtcbiAgYXR0YWNoVG9vbHRpcFRvSGlnaGxpZ2h0LFxuICBjcmVhdGVIaWdobGlnaHQsXG4gIGdldEVsZW1lbnRzUG9zaXRpb25JbkRvY3VtZW50XG59IGZyb20gXCIvbm9kZV9tb2R1bGVzLy5wbnBtL2FzdHJvQDQuMTIuMl9AdHlwZXMrbm9kZUAyMC4xNC4xMV90eXBlc2NyaXB0QDUuNS4zL25vZGVfbW9kdWxlcy9hc3Ryby9kaXN0L3J1bnRpbWUvY2xpZW50L2Rldi10b29sYmFyL2FwcHMvdXRpbHMvaGlnaGxpZ2h0LmpzP3Y9NmZmZjlhM2RcIjtcbmltcG9ydCB7IHJlc29sdmVBdWRpdFJ1bGUgfSBmcm9tIFwiL25vZGVfbW9kdWxlcy8ucG5wbS9hc3Ryb0A0LjEyLjJfQHR5cGVzK25vZGVAMjAuMTQuMTFfdHlwZXNjcmlwdEA1LjUuMy9ub2RlX21vZHVsZXMvYXN0cm8vZGlzdC9ydW50aW1lL2NsaWVudC9kZXYtdG9vbGJhci9hcHBzL2F1ZGl0L3J1bGVzL2luZGV4LmpzP3Y9NmZmZjlhM2RcIjtcbmZ1bmN0aW9uIHRydW5jYXRlKHZhbCwgbWF4TGVuZ3RoKSB7XG4gIHJldHVybiB2YWwubGVuZ3RoID4gbWF4TGVuZ3RoID8gdmFsLnNsaWNlKDAsIG1heExlbmd0aCAtIDEpICsgXCImaGVsbGlwO1wiIDogdmFsO1xufVxuZnVuY3Rpb24gY3JlYXRlQXVkaXRVSShhdWRpdCwgYXVkaXRzKSB7XG4gIGNvbnN0IHJlY3QgPSBhdWRpdC5hdWRpdGVkRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgY29uc3QgaGlnaGxpZ2h0ID0gY3JlYXRlSGlnaGxpZ2h0KHJlY3QsIFwid2FybmluZ1wiLCB7IFwiZGF0YS1hdWRpdC1jb2RlXCI6IGF1ZGl0LnJ1bGUuY29kZSB9KTtcbiAgY29uc3QgcmVzb2x2ZWRBdWRpdFJ1bGUgPSByZXNvbHZlQXVkaXRSdWxlKGF1ZGl0LnJ1bGUsIGF1ZGl0LmF1ZGl0ZWRFbGVtZW50KTtcbiAgY29uc3QgdG9vbHRpcCA9IGJ1aWxkQXVkaXRUb29sdGlwKHJlc29sdmVkQXVkaXRSdWxlLCBhdWRpdC5hdWRpdGVkRWxlbWVudCk7XG4gIGNvbnN0IGNhcmQgPSBidWlsZEF1ZGl0Q2FyZChyZXNvbHZlZEF1ZGl0UnVsZSwgaGlnaGxpZ2h0LCBhdWRpdC5hdWRpdGVkRWxlbWVudCwgYXVkaXRzKTtcbiAgW1wiZm9jdXNcIiwgXCJtb3VzZW92ZXJcIl0uZm9yRWFjaCgoZXZlbnQpID0+IHtcbiAgICBjb25zdCBhdHRyaWJ1dGUgPSBldmVudCA9PT0gXCJmb2N1c1wiID8gXCJhY3RpdmVcIiA6IFwiaG92ZXJlZFwiO1xuICAgIGhpZ2hsaWdodC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCAoKSA9PiB7XG4gICAgICBpZiAoZXZlbnQgPT09IFwiZm9jdXNcIikge1xuICAgICAgICBhdWRpdHMuZm9yRWFjaCgoYWR0KSA9PiB7XG4gICAgICAgICAgaWYgKGFkdC5jYXJkKSBhZHQuY2FyZC50b2dnbGVBdHRyaWJ1dGUoXCJhY3RpdmVcIiwgZmFsc2UpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFjYXJkLmlzTWFudWFsRm9jdXMpIGNhcmQuc2Nyb2xsSW50b1ZpZXcoKTtcbiAgICAgICAgY2FyZC50b2dnbGVBdHRyaWJ1dGUoXCJhY3RpdmVcIiwgdHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjYXJkLnRvZ2dsZUF0dHJpYnV0ZShhdHRyaWJ1dGUsIHRydWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgaGlnaGxpZ2h0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCAoKSA9PiB7XG4gICAgY2FyZC50b2dnbGVBdHRyaWJ1dGUoXCJob3ZlcmVkXCIsIGZhbHNlKTtcbiAgfSk7XG4gIGNvbnN0IHsgaXNGaXhlZCB9ID0gZ2V0RWxlbWVudHNQb3NpdGlvbkluRG9jdW1lbnQoYXVkaXQuYXVkaXRlZEVsZW1lbnQpO1xuICBpZiAoaXNGaXhlZCkge1xuICAgIHRvb2x0aXAuc3R5bGUucG9zaXRpb24gPSBoaWdobGlnaHQuc3R5bGUucG9zaXRpb24gPSBcImZpeGVkXCI7XG4gIH1cbiAgYXR0YWNoVG9vbHRpcFRvSGlnaGxpZ2h0KGhpZ2hsaWdodCwgdG9vbHRpcCwgYXVkaXQuYXVkaXRlZEVsZW1lbnQpO1xuICByZXR1cm4geyBoaWdobGlnaHQsIGNhcmQgfTtcbn1cbmZ1bmN0aW9uIGJ1aWxkQXVkaXRUb29sdGlwKHJ1bGUsIGVsZW1lbnQpIHtcbiAgY29uc3QgdG9vbHRpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhc3Ryby1kZXYtdG9vbGJhci10b29sdGlwXCIpO1xuICBjb25zdCB7IHRpdGxlLCBtZXNzYWdlIH0gPSBydWxlO1xuICB0b29sdGlwLnNlY3Rpb25zID0gW1xuICAgIHtcbiAgICAgIGljb246IFwid2FybmluZ1wiLFxuICAgICAgdGl0bGU6IGVzY2FwZUhUTUwodGl0bGUpXG4gICAgfSxcbiAgICB7XG4gICAgICBjb250ZW50OiBlc2NhcGVIVE1MKG1lc3NhZ2UpXG4gICAgfVxuICBdO1xuICBjb25zdCBlbGVtZW50RmlsZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiZGF0YS1hc3Ryby1zb3VyY2UtZmlsZVwiKTtcbiAgY29uc3QgZWxlbWVudFBvc2l0aW9uID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWFzdHJvLXNvdXJjZS1sb2NcIik7XG4gIGlmIChlbGVtZW50RmlsZSkge1xuICAgIGNvbnN0IGVsZW1lbnRGaWxlV2l0aFBvc2l0aW9uID0gZWxlbWVudEZpbGUgKyAoZWxlbWVudFBvc2l0aW9uID8gXCI6XCIgKyBlbGVtZW50UG9zaXRpb24gOiBcIlwiKTtcbiAgICB0b29sdGlwLnNlY3Rpb25zLnB1c2goe1xuICAgICAgY29udGVudDogZWxlbWVudEZpbGVXaXRoUG9zaXRpb24uc2xpY2UoXG4gICAgICAgIHdpbmRvdy5fX2FzdHJvX2Rldl90b29sYmFyX18ucm9vdC5sZW5ndGggLSAxXG4gICAgICAgIC8vIFdlIHdhbnQgdG8ga2VlcCB0aGUgZmluYWwgc2xhc2gsIHNvIG1pbnVzIG9uZS5cbiAgICAgICksXG4gICAgICBjbGlja0Rlc2NyaXB0aW9uOiBcIkNsaWNrIHRvIGdvIHRvIGZpbGVcIixcbiAgICAgIGFzeW5jIGNsaWNrQWN0aW9uKCkge1xuICAgICAgICBhd2FpdCBmZXRjaChcIi9fX29wZW4taW4tZWRpdG9yP2ZpbGU9XCIgKyBlbmNvZGVVUklDb21wb25lbnQoZWxlbWVudEZpbGVXaXRoUG9zaXRpb24pKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuICByZXR1cm4gdG9vbHRpcDtcbn1cbmZ1bmN0aW... (19406 more characters)"
        }
      },
      "id": 2,
      "thread_id": 0,
      "parent_id": 1,
      "elapsed": 0.0005370419999053411
    }
  ],
  "version": "1.12",
  "metadata": {
    "client": {
      "name": "appmap-node",
      "version": "2.23.0",
      "url": "https://github.com/getappmap/appmap-node"
    },
    "language": {
      "name": "javascript",
      "engine": "Node.js",
      "version": "v20.11.1"
    },
    "app": "developer-fashionunited-com",
    "recorder": {
      "type": "requests",
      "name": "requests"
    },
    "name": "GET /node_modules/.pnpm/astro@4.12.2_@types+node@20.14.11_typescript@5.5.3/node_modules/astro/dist/runtime/client/dev-toolbar/apps/audit/ui/audit-ui.js (200) — 2024-07-22T11:35:48.037Z"
  },
  "classMap": [
    {
      "type": "http",
      "name": "HTTP server requests",
      "children": [
        {
          "type": "route",
          "name": "GET /node_modules/.pnpm/astro@4.12.2_@types+node@20.14.11_typescript@5.5.3/node_modules/astro/dist/runtime/client/dev-toolbar/apps/audit/ui/audit-ui.js"
        }
      ]
    }
  ]
}